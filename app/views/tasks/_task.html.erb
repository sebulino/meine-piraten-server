<div id="<%= dom_id task %>">
  <div class="card-header">
    <h2><%= task.title %></h2>
    <% case task.status %>
    <% when "open" %>
      <span class="badge badge-open">Offen</span>
    <% when "claimed" %>
      <span class="badge badge-claimed">Übernommen</span>
    <% when "completed" %>
      <span class="badge badge-completed">Bearbeitet</span>
    <% when "done" %>
      <span class="badge badge-done">Erledigt</span>
    <% end %>
  </div>

  <% if task.description.present? %>
    <div class="detail-item detail-full" style="margin-bottom: var(--space-lg);">
      <div class="detail-label">Beschreibung</div>
      <div class="detail-value"><%= task.description %></div>
    </div>
  <% end %>

  <div class="detail-grid">
    <div class="detail-item">
      <div class="detail-label">Erstellt von</div>
      <div class="detail-value"><%= task.creator_name %></div>
    </div>

    <% if task.assignee.present? %>
      <div class="detail-item">
        <div class="detail-label">Zugewiesen an</div>
        <div class="detail-value"><%= task.assignee %></div>
      </div>
    <% end %>

    <div class="detail-item">
      <div class="detail-label">Kategorie</div>
      <div class="detail-value"><%= task.category.name %></div>
    </div>

    <div class="detail-item">
      <div class="detail-label">Gliederung</div>
      <div class="detail-value"><%= task.entity.name %></div>
    </div>

    <div class="detail-item">
      <div class="detail-label">Dringend</div>
      <div class="detail-value">
        <%= task.urgent ? raw('<span class="badge badge-urgent">Dringend</span>') : "Nein" %>
      </div>
    </div>

    <% if task.due_date.present? %>
      <div class="detail-item">
        <div class="detail-label">Fällig bis</div>
        <div class="detail-value"><%= task.due_date.strftime("%d.%m.%Y") %></div>
      </div>
    <% end %>

    <% if task.time_needed_in_hours.present? %>
      <div class="detail-item">
        <div class="detail-label">Zeitaufwand</div>
        <div class="detail-value"><%= task.time_needed_in_hours %> Std.</div>
      </div>
    <% end %>

    <% if task.activity_points.present? %>
      <div class="detail-item">
        <div class="detail-label">Aktivitätspunkte</div>
        <div class="detail-value"><%= task.activity_points %></div>
      </div>
    <% end %>
  </div>
</div>
